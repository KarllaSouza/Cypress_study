#name: Cypress Tests
#
#on:
#  push:
#    branches:
#      - main
#  pull_request:
#    branches:
#      - main
#
#jobs:
#  cypress-run:
#    runs-on: ubuntu-latest
#
#    steps:
#      - name: Check out the repository
#        uses: actions/checkout@v2
#
#      - name: Set up Node.js
#        uses: actions/setup-node@v2
#        with:
#          node-version: '16' # ou a versão necessária para o projeto
#
#      - name: Install dependencies
#        run: npm install
#
#      - name: Start application
#        run: npm start &
#        env:
#          CI: true
#
#      - name: Run Cypress tests
#        uses: cypress-io/github-action@v2
#        with:
##          build: npm run build # use este comando se precisar de um build antes de rodar os testes
#          start: npm start # configura o comando para iniciar a aplicação
##          wait-on: 'http://localhost:3000' # aguarde a aplicação iniciar antes dos testes
##          wait-on-timeout: 60 # timeout de 60 segundos
#        env:
#          CI: true

# ----------------------
# Nome do workflow
name: Cypress Tests

  # trigger para workflow ser executado
# push -> Todo push em qualquer branch
on: [push]

jobs:
  cypress-run-api:
    # if: ${{ github.event_name == 'push' }}
    runs-on: ubuntu-22.04
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      # Install npm dependencies, cache them correctly
      # and run all Cypress tests
      - name: Cypress run
        uses: cypress-io/github-action@v6
        with:
          spec: cypress/e2e/api_testing/*.cy.js